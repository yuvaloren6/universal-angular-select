angular.module("enliven",[]).constant("EmptyElement","<div ng-transclude><\/<div>").constant("MessageSelectionChanged","select:SelectionChanged").constant("MessageItemSelected","select:ItemSelected").constant("MessageDisableItems","select:DisableItems").constant("MessageSelectReset","select:SelectReset").service("Utilities",function(){this.isValue=function(n){return angular.isDefined(n)&&null!==n};this.isString=function(n){return this.isValue(n)&&typeof n=="string"&&""!==n};this.isOptionalParameter=function(n,t,i){return i.hasOwnProperty(t)&&angular.isDefined(i[t])&&null!==i[t]}}).directive("enliven",function(n,t,i,r,u,f,e){return{scope:{disabledItems:"=",multiple:"@",resetSelect:"@"},template:n,restrict:"A",require:"ngModel",transclude:Element,link:function(n,o,s,h){var c=[],l,a,p,w,b=function(){a=l?/^\d+$/.test(n.multiple)?new Number(n.multiple):Number.MAX_SAFE_INTEGER:1;y()},y=function(){a<c.length&&(c.length=a);n.$broadcast(u,c);v()},v,k;h.$render=function(){(angular.isString(h.$viewValue)||angular.isNumber(h.$viewValue))&&(c[0]=h.$viewValue);angular.isArray(h.$viewValue)&&(c=h.$viewValue.slice(0));y()};w=n.$on(r,function(n,t){n.stopPropagation();k(t);y();v()});v=function(){i(function(){n.$apply(function(){l?h.$setViewValue(c):h.$setViewValue(0==c.length?null:c[0])});1})};k=function(n){var t;if(undefined===n||null===n){l||(c=[]);return}if(l&&-1<(t=c.indexOf(n))){c.splice(t,1);return}!l&&0<c.length?c.splice(0,1,n):c.unshift(n)};p=n.$watchCollection("disabledItems",function(){n.$broadcast(f,n.disabledItems)});watchMultiple=n.$watch("multiple",function(n,t){n!=t&&b()});watchReset=n.$watch("resetSelect",function(t,i){t!==i&&(c=[],n.$broadcast(e),v())});n.$on("$destroy",function(){p();w();watchReset();watchMultiple()});l=t.isOptionalParameter(n,"multiple",s);b()}}});